{"ast":null,"code":"import _defineProperty from \"/home/ivan/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/ivan/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/ivan/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/ivan/react-mesto-auth/src/components/Login.js\";\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Header from '../components/Header';\nimport * as auth from '../components/auth';\nimport InfoTooltip from '../components/InfoTooltip';\nexport default function Login(_ref) {\n  var onLogin = _ref.onLogin;\n\n  var _useState = useState({\n    email: \"\",\n    password: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      values = _useState2[0],\n      setValues = _useState2[1]; ///////////\n\n\n  var navigate = useNavigate();\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setValues(function (prevState) {\n      return _objectSpread({}, prevState, _defineProperty({}, name, value));\n    });\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n\n    if (!values.email || !values.password) {\n      return;\n    }\n\n    auth.authorize(values.email, values.password).then(function (res) {\n      if (res.token) {\n        setValues({\n          email: \"\",\n          password: \"\"\n        });\n        localStorage.setItem('jwt', res.token);\n        onLogin(values.email); // обновляем стейт внутри App.js\n\n        navigate(\"/\"); // и переадресуем пользователя! \n      } ////////////\n      else {\n        setInfoPopup({\n          message: 'Что-то пошло не так!',\n          errorLogin: false,\n          isOpenLoginPopup: false\n        });\n        openPopup();\n      } /////////////\n\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    nav: '/sign-up',\n    navStatus: 'Регистрация',\n    emailUser: '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"login__welcome\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, \"\\u0412\\u0445\\u043E\\u0434\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"login__form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"email\",\n    name: \"email\",\n    type: \"email\",\n    placeholder: \"Email\",\n    className: \"login__input\",\n    value: values.username,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    id: \"password\",\n    name: \"password\",\n    type: \"password\",\n    placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n    className: \"login__input\",\n    value: values.password,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login__button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"login__link\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\"))));\n}","map":{"version":3,"sources":["/home/ivan/react-mesto-auth/src/components/Login.js"],"names":["React","useState","useNavigate","Header","auth","InfoTooltip","Login","onLogin","email","password","values","setValues","navigate","handleChange","e","target","name","value","prevState","handleSubmit","preventDefault","authorize","then","res","token","localStorage","setItem","setInfoPopup","message","errorLogin","isOpenLoginPopup","openPopup","catch","err","console","log","username"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Header from '../components/Header';\nimport * as auth from '../components/auth';\nimport InfoTooltip from '../components/InfoTooltip';\n\n\nexport default function Login({ onLogin }) {\n  const [values, setValues] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  ///////////\n\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setValues((prevState) => ({\n      ...prevState,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!values.email || !values.password) {\n      return;\n    }\n    auth\n      .authorize(values.email, values.password)\n      .then((res) => {\n        if (res.token) {\n          setValues({\n            email: \"\",\n            password: \"\",\n          })\n          localStorage.setItem('jwt', res.token);\n          onLogin(values.email);  // обновляем стейт внутри App.js\n          navigate(\"/\"); // и переадресуем пользователя! \n        }\n        ////////////\n        else {\n          setInfoPopup({\n            message: 'Что-то пошло не так!',\n            errorLogin: false,\n            isOpenLoginPopup: false\n          });\n          openPopup();\n        }\n        /////////////\n      })\n      .catch((err) => console.log(err));\n  };\n\n  return (\n    <div className=\"login\">\n        <Header nav={'/sign-up'} navStatus={'Регистрация'} emailUser={''}/>\n        <p className=\"login__welcome\">\n          Вход\n        </p>\n        <form onSubmit={handleSubmit} className=\"login__form\">\n          <input id=\"email\" name=\"email\" type=\"email\" placeholder=\"Email\" className=\"login__input\"\n                 value={values.username} onChange={handleChange} />\n          <input required id=\"password\" name=\"password\" type=\"password\" placeholder=\"Пароль\" className=\"login__input\"\n                 value={values.password} onChange={handleChange} />\n          <div className=\"login__button-container\">\n            <button type=\"submit\" className=\"login__link\" onSubmit={handleSubmit}>Войти</button>\n          </div>\n        </form>\n      </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}