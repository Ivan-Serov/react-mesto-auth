{"ast":null,"code":"import _toConsumableArray from\"/home/ivan/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/ivan/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import ImagePopup from'./ImagePopup';////////////////\nimport EditProfilePopup from\"./EditProfilePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import AddPopup from\"./AddPopup\";import DeletePopup from\"./DeletePopup\";import{api}from'../utils/Api';import{CurrentUserContext}from\"../contexts/CurrentUserContext.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){////////////////////////////////////////////\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setIsEditProfilePopupOpen=_React$useState2[1];function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddCardPopupOpen=_React$useState4[0],setisAddCardPopupOpen=_React$useState4[1];function handleAddCardClick(){setisAddCardPopupOpen(true);}var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isAvatarProfilePopupOpen=_React$useState6[0],setisAvatarProfilePopupOpen=_React$useState6[1];function handleAvatarProfileClick(){setisAvatarProfilePopupOpen(true);}var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),selectedCard=_React$useState8[0],setSelectedCard=_React$useState8[1];function handleCardClick(card){setSelectedCard(card);setIsImagePopupOpenen(true);}var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),isImagePopupOpenen=_React$useState10[0],setIsImagePopupOpenen=_React$useState10[1];function closeAllPopups(){setIsEditProfilePopupOpen(false);setisAddCardPopupOpen(false);setisAvatarProfilePopupOpen(false);setSelectedCard(null);setIsDeletePopupOpenen(false);setIsImagePopupOpenen(false);}////////////////////////////////////////////\nvar _React$useState11=React.useState({}),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setCurrentUser=_React$useState12[1];React.useEffect(function(){api.getUserInfo().then(function(data){setCurrentUser(data);}).catch(function(err){return console.log(err);});},[]);var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),cards=_React$useState14[0],setCards=_React$useState14[1];React.useEffect(function(){api.getInitialCards().then(function(data){setCards(data);}).catch(function(err){return console.log(err);});},[]);///////////////////////////////////////////\nfunction handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});if(isLiked){api.deleteLike(card._id).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){console.log(err);return[];});}else{api.addLike(card._id).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){console.log(err);return[];});}}////////////////\nfunction handleEditUser(data){api.editProfile(data).then(function(data){setCurrentUser(data);//console.log(data);\ncloseAllPopups();}).catch(function(err){return console.log(err);});}function handleUpdateAvatar(data){api.addAvatar(data).then(function(data){setCurrentUser(data);closeAllPopups();}).catch(function(err){return console.log(err);});}function handleAddPlace(data){api.addPlace(data).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){return console.log(err);});}var _React$useState15=React.useState(false),_React$useState16=_slicedToArray(_React$useState15,2),isDeletePopupOpenen=_React$useState16[0],setIsDeletePopupOpenen=_React$useState16[1];function handleCardDeleteClick(card){setIsDeletePopupOpenen(true);////\n////\nsetSelectedCard(card);}function handleDeletePlace(card){api.deletePost(card._id).then(function(){setCards(function(state){return state.filter(function(c){return c._id!==card._id;});});closeAllPopups();}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAddCardClick,onEditAvatar:handleAvatarProfileClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDeleteClick:handleCardDeleteClick,cards:cards}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onEditUser:handleEditUser}),/*#__PURE__*/_jsx(AddPopup,{isOpen:isAddCardPopupOpen,onClose:closeAllPopups,onAddPost:handleAddPlace}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isAvatarProfilePopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(ImagePopup,{isOpen:isImagePopupOpenen,card:selectedCard,onClose:closeAllPopups}),/*#__PURE__*/_jsx(DeletePopup,{isOpen:isDeletePopupOpenen,onClose:closeAllPopups,card:selectedCard,onDeletePlace:handleDeletePlace})]});}export default App;","map":{"version":3,"sources":["/home/ivan/react-mesto-auth/src/components/App.js"],"names":["React","Header","Main","Footer","ImagePopup","EditProfilePopup","EditAvatarPopup","AddPopup","DeletePopup","api","CurrentUserContext","App","useState","isEditProfilePopupOpen","setIsEditProfilePopupOpen","handleEditProfileClick","isAddCardPopupOpen","setisAddCardPopupOpen","handleAddCardClick","isAvatarProfilePopupOpen","setisAvatarProfilePopupOpen","handleAvatarProfileClick","selectedCard","setSelectedCard","handleCardClick","card","setIsImagePopupOpenen","isImagePopupOpenen","closeAllPopups","setIsDeletePopupOpenen","currentUser","setCurrentUser","useEffect","getUserInfo","then","data","catch","err","console","log","cards","setCards","getInitialCards","handleCardLike","isLiked","likes","some","i","_id","deleteLike","newCard","state","map","c","addLike","handleEditUser","editProfile","handleUpdateAvatar","addAvatar","handleAddPlace","addPlace","isDeletePopupOpenen","handleCardDeleteClick","handleDeletePlace","deletePost","filter"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\n\nimport ImagePopup from './ImagePopup';\n////////////////\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPopup from \"./AddPopup\";\nimport DeletePopup from \"./DeletePopup\";\nimport {api}  from '../utils/Api'\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\n\nfunction App() {\n  ////////////////////////////////////////////\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  const [isAddCardPopupOpen, setisAddCardPopupOpen] = React.useState(false);\n  function handleAddCardClick() {\n    setisAddCardPopupOpen(true);\n  }\n  const [isAvatarProfilePopupOpen, setisAvatarProfilePopupOpen] = React.useState(false);\n  function handleAvatarProfileClick() {\n    setisAvatarProfilePopupOpen(true);\n  }\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setIsImagePopupOpenen(true);\n  }\n  const [isImagePopupOpenen, setIsImagePopupOpenen] = React.useState(false);\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setisAddCardPopupOpen(false);\n    setisAvatarProfilePopupOpen(false);\n    setSelectedCard(null);\n    setIsDeletePopupOpenen(false);\n    setIsImagePopupOpenen(false);\n  }\n  ////////////////////////////////////////////\n  const [currentUser, setCurrentUser] = React.useState({});\n  React.useEffect(() => {\n    api\n      .getUserInfo()\n      .then((data) => {\n        setCurrentUser(data);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n  \n  const [cards, setCards] = React.useState([]);\n  React.useEffect(() => {\n    api\n      .getInitialCards()\n      .then((data) => {\n        setCards(data);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n  ///////////////////////////////////////////\n  function handleCardLike(card){\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    \n    if (isLiked) {\n      api\n        .deleteLike(card._id)\n        .then((newCard) => {\n          setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\n        })\n        .catch((err) => {\n          console.log(err);\n\n          return [];\n        });\n    } else {\n      api\n        .addLike(card._id)\n        .then((newCard) => {\n          setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\n        })\n        .catch((err) => {\n          console.log(err);\n\n          return [];\n        });\n    }\n    \n  } \n////////////////\n  function handleEditUser(data) {\n  \n    api\n      .editProfile(data)\n      .then((data) => {\n        setCurrentUser(data);\n        //console.log(data);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleUpdateAvatar(data) {\n    api\n      .addAvatar(data)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n  function handleAddPlace(data) {\n    api\n      .addPlace(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n  const [isDeletePopupOpenen, setIsDeletePopupOpenen] =React.useState(false);\n  function handleCardDeleteClick(card) {\n    setIsDeletePopupOpenen(true);\n    ////\n\n    ////\n    setSelectedCard(card);\n  }\n  function handleDeletePlace(card) {\n    api\n      .deletePost(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header />\n      <Main \n        onEditProfile={handleEditProfileClick}\n        onAddPlace={handleAddCardClick}\n        onEditAvatar={handleAvatarProfileClick}\n        onCardClick={handleCardClick}\n        onCardLike={handleCardLike}\n        onCardDeleteClick={handleCardDeleteClick}\n        cards={cards}\n      />\n      <Footer />\n      <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onEditUser={handleEditUser}\n      />\n      <AddPopup\n          isOpen={isAddCardPopupOpen}\n          onClose={closeAllPopups}\n          onAddPost={handleAddPlace}\n        />\n      <EditAvatarPopup\n          isOpen={isAvatarProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n      />\n      <ImagePopup \n        isOpen={isImagePopupOpenen}\n        card={selectedCard}\n        onClose={closeAllPopups}\n      />\n      <DeletePopup\n          isOpen={isDeletePopupOpenen}\n          onClose={closeAllPopups}\n          card={selectedCard}\n          onDeletePlace={handleDeletePlace}\n        />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}