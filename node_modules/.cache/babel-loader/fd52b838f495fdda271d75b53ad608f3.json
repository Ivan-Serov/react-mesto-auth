{"ast":null,"code":"import _classCallCheck from \"/home/ivan/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ivan/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar Api = /*#__PURE__*/function () {\n  function Api(url, token) {\n    _classCallCheck(this, Api);\n\n    this.checkResult = function (res) {\n      if (res.ok) {\n        return res.json();\n      } else {\n        return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));\n      }\n    };\n\n    this._url = url;\n    this._authorizationToken = token;\n    this._headers = {\n      authorization: this._authorizationToken,\n      'Content-Type': 'application/json'\n    };\n  }\n\n  _createClass(Api, [{\n    key: \"getUserInfo\",\n    value: function getUserInfo() {\n      return fetch(this._url + '/users/me', {\n        method: 'GET',\n        headers: {\n          authorization: this._authorizationToken\n        }\n      }).then(this.checkResult);\n    }\n  }, {\n    key: \"getInitialCards\",\n    value: function getInitialCards() {\n      return fetch(this._url + '/cards', {\n        headers: {\n          authorization: this._authorizationToken\n        }\n      }).then(this.checkResult);\n    }\n  }, {\n    key: \"editProfile\",\n    value: function editProfile(data) {\n      return fetch(this._url + '/users/me', {\n        method: 'PATCH',\n        headers: this._headers,\n        body: JSON.stringify(data)\n      }).then(this.checkResult);\n    }\n  }, {\n    key: \"addPlace\",\n    value: function addPlace(data) {\n      return fetch(this._url + '/cards', {\n        method: 'POST',\n        headers: this._headers,\n        body: JSON.stringify(data)\n      }).then(this.checkResult);\n    }\n  }, {\n    key: \"deletePost\",\n    value: function deletePost(cardId) {\n      return fetch(this._url + '/cards/' + cardId, {\n        method: 'DELETE',\n        headers: this._headers\n      }).then(this.checkResult);\n    }\n  }, {\n    key: \"addLike\",\n    value: function addLike(cardId) {\n      return fetch(this._url + '/cards/likes/' + cardId, {\n        method: 'PUT',\n        headers: this._headers\n      }).then(this.checkResult);\n    }\n  }, {\n    key: \"deleteLike\",\n    value: function deleteLike(cardId) {\n      return fetch(this._url + '/cards/likes/' + cardId, {\n        method: 'DELETE',\n        headers: this._headers\n      }).then(this.checkResult);\n    }\n  }, {\n    key: \"addAvatar\",\n    value: function addAvatar(avatar) {\n      return fetch(this._url + '/users/me/avatar', {\n        method: 'PATCH',\n        headers: this._headers,\n        body: JSON.stringify(avatar)\n      }).then(this.checkResult);\n    }\n  }]);\n\n  return Api;\n}();\n\nexport var api = new Api('https://nomoreparties.co/v1/cohort-28', 'd0022a9e-a6be-4d9a-ab6e-3949875c7c34');","map":{"version":3,"sources":["/home/ivan/react-mesto-auth/src/utils/Api.js"],"names":["Api","url","token","checkResult","res","ok","json","Promise","reject","status","_url","_authorizationToken","_headers","authorization","fetch","method","headers","then","data","body","JSON","stringify","cardId","avatar","api"],"mappings":"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","sourcesContent":["class Api {\n  constructor(url, token) {\n    this._url = url;\n    this._authorizationToken = token;\n    this._headers ={authorization:this._authorizationToken, 'Content-Type': 'application/json'};\n  }\n  getUserInfo() {\n    return fetch(this._url +'/users/me', {\n      method: 'GET',\n      headers: {\n        authorization: this._authorizationToken\n      }})\n    .then(this.checkResult);\n  }\n  getInitialCards() {\n    return fetch(this._url +'/cards', {\n      headers: {\n        authorization: this._authorizationToken\n      }})\n    .then(this.checkResult);\n  }\n  editProfile(data){\n    return fetch(this._url +'/users/me', {\n        method: 'PATCH',\n        headers: this._headers,\n        body: JSON.stringify(data)\n      })\n    .then(this.checkResult);\n  }\n  addPlace(data){\n    return fetch(this._url +'/cards', {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify(data)\n    })\n    .then(this.checkResult);\n  }\n  deletePost(cardId) {\n    return fetch(this._url + '/cards/' + cardId, {\n      method: 'DELETE',\n      headers: this._headers,\n    })\n    .then(this.checkResult);\n  }\n  addLike(cardId){\n    return fetch(this._url + '/cards/likes/' + cardId, {\n      method: 'PUT',\n      headers: this._headers,\n    })\n    .then(this.checkResult);\n  }\n  deleteLike(cardId){\n    return fetch(this._url + '/cards/likes/' + cardId, {\n      method: 'DELETE',\n      headers: this._headers,\n    })\n    .then(this.checkResult);\n  }\n  addAvatar(avatar){\n    return fetch(this._url +'/users/me/avatar', {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify(avatar)\n    })\n    .then(this.checkResult);\n  }\n  checkResult = res => {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n}\nexport const api = new Api('https://nomoreparties.co/v1/cohort-28', 'd0022a9e-a6be-4d9a-ab6e-3949875c7c34');"]},"metadata":{},"sourceType":"module"}